# ====================================================
# GOOGLE CLOUD PLATFORM (GCP) CONFIGURATION
# ====================================================

# ⚠️  WARNING: DO NOT COMMIT THIS FILE WITH REAL VALUES!
#     Use Google Secret Manager for production secrets

# ========== GCP PROJECT SETTINGS ==========
GOOGLE_CLOUD_PROJECT=your-project-id
GOOGLE_CLOUD_REGION=asia-southeast2  # Jakarta
GOOGLE_CLOUD_ZONE=asia-southeast2-a
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json

# ========== CLOUD RUN CONFIGURATION ==========
# Cloud Run will set PORT automatically
# PORT=8080  # ⬅️ Cloud Run always uses port 8080

# Service Names
TRADING_SERVER_SERVICE=trading-socket-server
ADMIN_API_SERVICE=trading-admin-api
CUSTOMER_API_SERVICE=trading-customer-api

# Cloud Run URLs (will be set after deployment)
TRADING_SERVER_URL=https://trading-socket-server-xxxxxx-xx.a.run.app
ADMIN_API_URL=https://trading-admin-api-xxxxxx-xx.a.run.app
CUSTOMER_API_URL=https://trading-customer-api-xxxxxx-xx.a.run.app

# ========== CLOUD SQL (PostgreSQL) ==========
# Use Cloud SQL Proxy for local, connection string for production
DB_USER=postgres
DB_PASSWORD=your-secure-password
DB_NAME=trading_db
DB_INSTANCE=your-project-id:region:instance-name
CLOUD_SQL_CONNECTION_NAME=your-project-id:region:instance-name

# For local development with Cloud SQL Proxy
# DB_HOST=127.0.0.1
# DB_PORT=5432

# For Cloud Run (direct connection)
DB_HOST=/cloudsql/your-project-id:region:instance-name
DB_PORT=5432
DATABASE_URL=postgresql+psycopg2://${DB_USER}:${DB_PASSWORD}@/${DB_NAME}?host=${DB_HOST}

# ========== APPLICATION SETTINGS ==========
# Flask/Server
FLASK_ENV=production
FLASK_DEBUG=0
SECRET_KEY=${SECRET_KEY}  # Store in Secret Manager

# Security
ADMIN_API_KEY=${ADMIN_API_KEY}  # Store in Secret Manager
CUSTOMER_API_KEY_PREFIX=sk_cust_
JWT_SECRET_KEY=${JWT_SECRET_KEY}  # Store in Secret Manager
TOKEN_EXPIRE_HOURS=24

# Rate Limiting (Cloud Run has its own limits)
ADMIN_RATE_LIMIT=300    # Cloud Run can handle more
CUSTOMER_RATE_LIMIT=150
MAX_CONNECTIONS=250     # Cloud Run default is 250
SESSION_TIMEOUT_MINUTES=30

# Trading Settings
SIGNAL_EXPIRY_MINUTES=5
MAX_ACTIVE_SIGNALS=100
CHECK_INTERVAL_SECONDS=60

# ========== CLOUD STORAGE (For logs/backups) ==========
GCS_BUCKET_NAME=your-trading-logs-bucket
GCS_BACKUP_FOLDER=backups/
GCS_LOG_FOLDER=logs/

# ========== LOGGING (Stackdriver/Cloud Logging) ==========
GOOGLE_CLOUD_LOGGING=true
LOG_LEVEL=INFO
LOG_NAME=trading-server

# ========== MONITORING (Cloud Monitoring) ==========
ENABLE_CLOUD_MONITORING=true
METRICS_EXPORT_INTERVAL=60

# ========== CORS & SECURITY ==========
CORS_ORIGINS=https://your-domain.com,https://console.cloud.google.com
ENABLE_HTTPS=true
ALLOWED_HOSTS=.a.run.app,.googleapis.com

# ========== SERVICE PORTS (GCP Cloud Run) ==========
# Cloud Run containers MUST listen on PORT (always 8080)
CLOUD_RUN_PORT=8080
TRADING_SERVER_PORT=9999  # Internal for socket connections